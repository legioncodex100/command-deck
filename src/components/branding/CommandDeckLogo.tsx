"use client";

import React, { useEffect, useState } from "react";
import { cn } from "@/lib/utils";

// Typing Effect Component with Blinking Cursor
const Typewriter = ({ text, speed = 100, delay = 0 }: { text: string, speed?: number, delay?: number }) => {
    const [displayedText, setDisplayedText] = useState("");

    useEffect(() => {
        const startTimeout = setTimeout(() => {
            let i = 0;
            const timer = setInterval(() => {
                if (i < text.length) {
                    setDisplayedText((prev) => prev + text.charAt(i));
                    i++;
                } else {
                    clearInterval(timer);
                }
            }, speed);
            return () => clearInterval(timer);
        }, delay);
        return () => clearTimeout(startTimeout);
    }, [text, speed, delay]);

    return (
        <span>
            {displayedText}
            <span className="animate-pulse">_</span>
        </span>
    );
};

export function CommandDeckLogo({ className, showText = true }: { className?: string, showText?: boolean }) {
    return (
        <div className={cn("text-emerald-500 flex flex-row items-center gap-4 h-full", className)}>
            {/* 
                SVG of the Ship Only.
            */}
            <svg
                viewBox="0 0 265.79 151.72"
                preserveAspectRatio="xMidYMid meet"
                fill="currentColor"
                className="h-full w-auto drop-shadow-[0_0_10px_rgba(16,185,129,0.5)] animate-pixel-rez"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path d="M144.5.2c18.49-.27,37.19-.32,55.65.17,4.04.11,8.05-.14,12.08.48,4.65.72,10.38,4.99,13.39,8.54,5.73,6.77,11.96,14.89,17.23,22.06,1.79,2.44,3.56,4.94,4.91,7.65,4.89,9.84,9.4,21.78,13.61,32.07,2.22,5.43,5.32,11.18,4.17,17.18-.54,2.84-3.45,4.54-5.73,5.92-8.65,5.23-19.07,10.97-28.09,15.53-4.52,2.28-5.76,2.42-10.78,2.69-15.05.83-30.37-.09-45.45.69-9.11.47-16.57,2.81-25.29,5.09-39.14,10.26-77.99,21.93-117.26,31.66-5.25,1.3-8.7,2.99-13.96.52-3.93-1.85-13.23-6.98-16.4-9.64-3.64-3.05-3.22-7.41-.21-10.71,3.97-4.35,9.4-8.83,13.79-12.93,20.15-18.82,40.73-37.23,60.76-56.18,3.32-3.14,6.46-5.34,7.7-9.89,2.24-8.26,2.6-17.6,4.75-25.86,1.43-5.49,3.14-6.25,7.73-8.94,8.75-5.14,17.94-9.61,26.82-14.52,6.43-2.04,13.81-1.49,20.57-1.59ZM171.27,1.96c-11.07.19-22.17-.25-33.24-.01-.54.01-1.04.23-1.58.25-.92.03-7.12-.25-7.21.35l12.68,21.56L171.27,1.96ZM207.82,1.96h-33l-11.42,22.16L207.82,1.96ZM210.95,2.7l-47.67,23.59c0,.35,5.14,3.55,5.86,3.95.79.44,2.39,1.51,3.19,1.25l47.47-24.26c1.03-.79-1.84-1.97-2.63-2.41-1.62-.89-4.42-2.5-6.23-2.11ZM139.75,24.34c.14-.12-.93-2.11-1.1-2.44-2.33-4.36-8.04-15.16-11.11-18.35-1.29-1.34-2.17-.17-3.7.19l-27.94,15.35.13.46,43.72,4.78ZM171.5,4.25l-27.18,20.55,16.22.58,10.96-21.13ZM242.99,34.85l-.36-.89c-6.42-7.61-11.92-16.08-18.37-23.65-.63-.73-1.39-1.96-2.39-1.96l-46.02,23.31,67.15,3.19ZM138.38,26.4c.24-.32-1.32-.63-1.51-.66-13.84-.67-28.25-3.79-42-4.36-.55-.02-1.48-.12-1.94.11-.67.32-1.77,3.58-1.99,4.41l-4.86,27.22,52.3-26.72ZM157.57,27.09l-14.16-.34c.49,1.1,2.5,6.48,3.54,6.5l10.63-6.16ZM148.2,34.84l11.97,6.4,9.72-8.33-8-5.24-.78-.14-12.92,7.32ZM142.01,27.8l-.88.09c-4.03,5.49-7.84,11.19-11.79,16.76-.44.62-4.31,5.41-3.98,5.73.7.03,1.39-.71,1.93-1.15.91-.73,1.83-1.74,2.75-2.5,4.84-3.99,9.89-7.74,14.6-11.9.22-.34.35-.45.26-.9-.33-1.53-2.52-4.36-2.9-6.14ZM138.61,28.46l-50.02,25.57c6.88.31,13.78.42,20.68.45l10.38.35,2.38-2.87,16.58-23.5ZM239.57,36.68l-65.55-2.63c.91,1.55,2.28,2.74,3.42,4.12,3.45,4.2,6.99,9.21,10.62,13.13.51.55,1.57,1.76,2.3,1.81l49.21-16.43ZM186.35,52.2l-.21-.81-14.34-17.2-9.4,7.66.11.56,23.85,9.8ZM145.85,36.03c-1.84,1.58-3.65,3.22-5.54,4.75-5.41,4.38-12.35,9.1-17.24,13.82-.22.21-.99.95-.81,1.26l15.32,8.69.7-.23,20.38-21.6c-.2-.32-.49-.55-.8-.76-3.07-2.08-7.39-3.49-10.49-5.72l-1.53-.21ZM192.97,54.49l47.6,16.42c.55-.14.75-2.89.82-3.51.86-7.93,1.7-16.26,2.28-24.21.07-.96.41-4.35.2-4.99-.06-.19-.15-.29-.34-.35-.68-.22-7.44,2.03-8.71,2.43-13.82,4.34-27.45,9.26-41.29,13.52l-.56.7ZM246.19,39.87c-.65-.5-.86,1.79-.91,2.17-1.06,8.47-2.1,18.68-2.51,27.18-.04.86-.01,1.74.03,2.59l19.61,7.11-16.22-39.05ZM185.89,54.26l-.75-.73c-7.83-2.74-15.58-7.09-23.39-9.72-.41-.14-.81-.37-1.27-.25l-19.58,20.52,44.99-9.82ZM85.1,55.91c-6.05,4.92-11.55,10.54-17.29,15.83-6.06,5.58-12.32,10.99-18.28,16.67-.69.66-3.72,3.46-4,4-.15.28-.17.41.11.58.19.12,3.57.26,4.39.4,2.04.34,4.64,1.54,6.49,1.75.48.05.95.07,1.4-.16l58.54-37.84v-.47s-31.36-.75-31.36-.75ZM187.94,55.86c-.17-.15-2.31.25-2.75.33-13.75,2.55-29.38,6.1-42.94,9.6-.61.16-1.22.28-1.82.46l-.2.65,29.98,26.4,17.73-37.44ZM192.64,56.09l-.32.53,33.42,52.01c.2.22.31.26.58.12.75-.4,4.98-11.62,5.65-13.32,2.28-5.8,4.6-11.66,6.69-17.52.28-.78,1.72-4.44,1.49-4.91l-47.51-16.9ZM190.39,56.84c-.82-.73-1.4.82-1.73,1.45-5.86,11.22-10.45,23.17-16.29,34.41l-.4,1.73,51.84,14.98-33.42-52.58ZM135.6,65.49c-4.46-2.28-8.75-5.21-13.2-7.47-.8-.4-1.9-1.18-2.75-.93l-59.51,38.49-.32.56,17.63,10.61,58.07-40.39.07-.87ZM79.04,107.74l.17,1c3.91,4.1,7.62,8.41,11.09,12.89l.65.23,77.34-27.5-30.68-27.26-58.58,40.65ZM228.83,107.93c.46.07.76-.13,1.13-.35,3.06-1.92,7.35-5.74,10.4-8.1,7.31-5.69,14.46-11.6,21.8-17.25,1.29-1.12-1.79-2.18-2.66-2.55-5.16-2.19-10.9-3.63-16.09-5.84l-1.33-.05-13.24,34.15ZM264,83.04l-27.18,21.69c.41.04.76-.2,1.11-.37,4.65-2.23,9.79-5.26,14.35-7.81,2.49-1.39,9.54-4.88,10.91-6.91.27-.4.44-.79.57-1.26.2-.71.57-5.03.24-5.35ZM10.25,125.74l44.76-29.12c0-.35-4.16-1.26-4.79-1.37-4.56-.84-6.4-.98-10.05,2.05-3.96,3.28-7.84,7.45-11.64,10.97-6.18,5.72-12.6,11.25-18.28,17.47ZM219.24,110.67c-.06-.34-.41-.45-.69-.57-1.5-.64-4.08-1.25-5.76-1.78-12.24-3.8-24.62-7.52-36.95-11.02-.79-.22-3.66-1.18-4.19-1-.18.06-.3.16-.34.35-.07,3.92.81,8.73-.27,12.51-.25.86-.89,1.5-.9,2.41l49.11-.91ZM91.56,132.37l75.54-20.28c4.35-3.6,2.51-10.41,2.48-15.36-.24-.34-.75-.22-1.1-.17-1.93.28-5.97,1.98-8.06,2.69-22.82,7.76-45.41,16.28-68.24,24.04-1.14.48-.23,1.82-.17,2.81.12,2.12.04,4.22-.45,6.28ZM57.24,97.47L3.17,132.94c.36.42.84.69,1.3.98,4.53,2.89,10.59,6.41,15.37,8.84,1.3.66,2.59,1.38,4.05,1.65l51.36-36.25c.29-.57-1.2-1.45-1.66-1.78-1.97-1.45-4.49-2.86-6.63-4.11s-6.45-4-8.58-4.66c-.39-.12-.71-.3-1.13-.13ZM30.12,142.64l58.68-20.18c-2.65-3.26-5.25-6.64-8.09-9.73-.66-.72-3.08-3.51-3.83-3.39l-46.76,33.31ZM24.63,149.73c.34.33,7.04-1.36,8.09-1.62,18.35-4.5,36.46-10.06,54.79-14.65,3.45-1.62,3.53-5.89,2.22-8.98-.45-.27-2.38.45-3.02.65-9.83,3.07-19.76,7.06-29.53,10.44-10.6,3.68-21.26,7.2-31.87,10.84l-.65.5-.04,2.82ZM22.58,149.73c.05-2.05.81-2.87-1.15-4.22-.74-.51-2.04-.96-2.89-1.45-4.75-2.77-10.52-6.58-15.37-8.84-.38-.18-.7-.41-1.15-.33-.36,2.67.52,3.68,2.53,5.12,3.81,2.71,9.77,6,13.99,8.17.57.29,3.65,1.96,4.04,1.56Z" />
            </svg>

            {/* Typography - Rendered with Geist Mono for technical feel, smaller */}
            {showText && (
                <div
                    className="font-bold tracking-[0.2em] text-sm md:text-base uppercase glow-text select-none text-emerald-500"
                    style={{ fontFamily: 'var(--font-geist-mono)' }}
                >
                    <Typewriter text="COMMAND_DECK" speed={150} delay={200} />
                </div>
            )}

            <style jsx global>{`
                .glow-text {
                    text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
                }
            `}</style>
        </div>
    );
}
